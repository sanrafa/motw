/// HUNTER GEAR VALIDATION TABLE
///// Validation table of available hunter gear.

-- Type: weapon, armor, transport
-- Desc: description
-- Tags: tag array
-- damage: harm #
-- healing: -harm #
-- armor: armor #
-- playbook: approved hunter types, if applicable
-- owner: creator if custom

REMOVE TABLE gear;
DEFINE TABLE gear SCHEMAFULL
    PERMISSIONS
        FOR create, select FULL
        FOR update, delete WHERE owner = (SELECT id FROM hunter WHERE id = $auth.token OR user = $auth.id );

DEFINE FIELD type ON TABLE gear TYPE string ASSERT $value INSIDE ['weapon', 'armor', 'transport'];

DEFINE FIELD desc ON TABLE gear TYPE string ASSERT $value IS NOT NONE;

DEFINE FIELD tags ON TABLE gear TYPE array ASSERT $value IS NOT NONE;
    DEFINE FIELD tags.* ON TABLE gear TYPE record(tag);

DEFINE FIELD damage ON TABLE gear TYPE int VALUE NONE OR $after;

DEFINE FIELD healing ON TABLE gear TYPE int VALUE NONE OR $after;

DEFINE FIELD armor ON TABLE gear TYPE int VALUE NONE OR $after;

DEFINE FIELD playbook ON TABLE gear TYPE array VALUE NONE OR $after;
    DEFINE FIELD playbook.* ON TABLE gear TYPE record(playbook);

DEFINE FIELD owner ON TABLE gear TYPE record(hunter) VALUE NONE OR $after;

INSERT INTO gear 
(id, type, desc, tags, damage, healing, armor, playbook) VALUES
('protective', 'armor', 'Protective Gear', [tag:1armor], NONE, NONE, 1, [playbook:chosen]),
('base-staff', 'weapon', 'staff (1-harm hand/close)', [tag:1harm, tag:hand, tag:close], 1, NONE, NONE, [playbook:chosen]),
('base-haft', 'weapon', 'haft (2-harm hand)', [tag:2harm, tag:close], 2, NONE, NONE, [playbook:chosen]),
('base-handle', 'weapon', 'handle (1-harm hand balanced)', [tag:1harm, tag:hand, tag:balanced], 1, NONE, NONE, [playbook:chosen]),
('base-chain', 'weapon', 'chain (1-harm hand area)', [tag:1harm, tag:hand, tag:area], 1, NONE, NONE, [playbook:chosen]),
('stakes', 'weapon', 'Mallet & wooden stakes', [tag:3harm, tag:intimate, tag:slow, tag:wooden], 3, NONE, NONE, [playbook:expert]),
('silversword', 'weapon', 'Silver sword', [tag:2harm, tag:hand, tag:messy, tag:silver], 2, NONE, NONE, [playbook:expert]),
('ironsword', 'weapon', 'Cold iron sword', [tag:2harm, tag:hand, tag:messy, tag:iron], 2, NONE, NONE, [playbook:expert]),
('blessedknife', 'weapon', 'Blessed knife', [tag:2harm, tag:hand, tag:holy], 2, NONE, NONE, [playbook:expert]),
('enchanteddagger', 'weapon', 'Enchanted dagger', [tag:2harm, tag:hand, tag:magic], 2, NONE, NONE, [playbook:expert, playbook:wronged]),
('jujubag', 'weapon', 'Juju bag', [tag:1harm, tag:far, tag:magic], 1, NONE, NONE, [playbook:expert]),
('flamethrower', 'weapon', 'Flamethrower', [tag:3harm, tag:close, tag:fire, tag:heavy, tag:volatile], 3, NONE, NONE, [playbook:expert]),
('magnum', 'weapon', 'Magnum', [tag:modern, tag:3harm, tag:close, tag:reload, tag:loud], 3, NONE, NONE, [playbook:expert, playbook:flake, playbook:initiate, playbook:monstrous]),
('shotgun', 'weapon', 'Shotgun', [tag:modern, tag:3harm, tag:close, tag:messy, tag:loud], 3, NONE, NONE, [playbook:expert, playbook:flake, playbook:initiate, playbook:monstrous, playbook:professional, playbook:spooky, playbook:wronged]),
('38revolver', 'weapon', '.38 revolver', [tag:modern, tag:2harm, tag:close, tag:reload, tag:loud], 2, NONE, NONE, [playbook:flake, playbook:initiate, playbook:monstrous, playbook:professional, playbook:spooky, playbook:wronged]),
('9mm', 'weapon', '9mm handgun', [tag:modern, tag:2harm, tag:close, tag:loud], 2, NONE, NONE, [playbook:flake, playbook:initiate, playbook:monstrous, playbook:professional, playbook:spooky, playbook:wronged]),
('huntingrifle', 'weapon', 'Hunting rifle', [tag:2harm, tag:far, tag:loud], 2, NONE, NONE, [playbook:flake, playbook:professional, playbook:spooky, playbook:wronged]),
('bigknife', 'weapon', 'Big knife', [tag:1harm, tag:hand], 1, NONE, NONE, [playbook:flake, playbook:monstrous, playbook:professional, playbook:spooky, playbook:wronged]),
('throwingknives', 'weapon', 'Throwing knives', [tag:hidden, tag:1harm, tag:close, tag:many], 1, NONE, NONE, [playbook:flake]),
('holdoutpistol', 'weapon', 'Holdout pistol', [tag:hidden, tag:2harm, tag:close, tag:loud, tag:reload], 2, NONE, NONE, [playbook:flake]),
('garrote', 'weapon', 'Garrote', [tag:hidden, tag:3harm, tag:intimate], 3, NONE, NONE, [playbook:flake]),
('watchmansflashlight', 'weapon', "Watchman's flashlight", [tag:hidden, tag:1harm, tag:hand], 1, NONE, NONE, [playbook:flake]),
('brassknuckles', 'weapon', 'Brass knuckles', [tag:hidden, tag:1harm, tag:hand, tag:stealthy, tag:small], 1, NONE, NONE, [playbook:flake, playbook:monstrous, playbook:wronged]),
('butterflyknife', 'weapon', 'Butterfly knife', [tag:hidden, tag:1harm, tag:hand], 1, NONE, NONE, [playbook:flake]),
('oldfashionedarmor', 'armor', 'Old-fashioned armor', [tag:oldfashioned, tag:1armor, tag:heavy], NONE, NONE, 1, [playbook:initiate]),
('sword', 'weapon', 'Sword', [tag:oldfashioned, tag:2harm, tag:hand, tag:messy], 2, NONE, NONE, [playbook:initiate, playbook:monstrous]),
('axe', 'weapon', 'Axe', [tag:oldfashioned, tag:2harm, tag:hand, tag:messy], 2, NONE, NONE, [playbook:initiate]),
('bigsword', 'weapon', 'Big sword', [tag:oldfashioned, tag:3harm, tag:hand, tag:messy, tag:heavy], 3, NONE, NONE, [playbook:initiate]),
('bigaxe', 'weapon', 'Big axe', [tag:oldfashioned, tag:3harm, tag:hand, tag:messy, tag:slow, tag:heavy], 3, NONE, NONE, [playbook:initiate]),
('silverknife', 'weapon', 'Silver knife', [tag:oldfashioned, tag:1harm, tag:hand, tag:silver], 1, NONE, NONE, [playbook:initiate]),
('fightingsticks', 'weapon', 'Fighting sticks', [tag:oldfashioned, tag:1harm, tag:hand, tag:quick], 1, NONE, NONE, [playbook:initiate]),
('spear', 'weapon', 'Spear', [tag:oldfashioned, tag:2harm, tag:hand, tag:close], 2, NONE, NONE, [playbook:initiate]),
('mace', 'weapon', 'Mace', [tag:oldfashioned, tag:2harm, tag:hand, tag:messy], 2, NONE, NONE, [playbook:initiate]),
('crossbow', 'weapon', 'Crossbow', [tag:oldfashioned, tag:2harm, tag:close, tag:slow], 2, NONE, NONE, [playbook:initiate]),
('sniperrifle', 'weapon', 'Sniper rifle', [tag:modern, tag:3harm, tag:far], 3, NONE, NONE, [playbook:initiate]),
('base-teeth', 'weapon', 'Base: teeth (3-harm intimate)', [tag:natural, tag:3harm, tag:intimate], 3, NONE, NONE, [playbook:monstrous]),
('base-claws', 'weapon', 'Base: claws (2-harm hand)', [tag:natural, tag:2harm, tag:hand], 2, NONE, NONE, [playbook:monstrous]),
('base-lifedrain', 'weapon', 'Base: life-drain (1-harm intimate healing)', [tag:natural, tag:1harm, tag:intimate, tag:healing], 1, NONE, NONE, [playbook:monstrous]),
('base-magicalforce', 'weapon', 'Base: magical force (1-harm magical close)', [tag:natural, tag:1harm, tag:magic, tag:close], 1, NONE, NONE, [playbook:monstrous]),
('hugesword', 'weapon', 'Huge sword', [tag:3harm, tag:hand, tag:messy, tag:heavy], 3, NONE, NONE, [playbook:monstrous, playbook:wronged]),
('golfclub', 'weapon', 'Golf club', [tag:2harm, tag:hand, tag:innocuous, tag:messy], 2, NONE, NONE, [playbook:mundane]),
('baseballbat', 'weapon', 'Baseball bat', [tag:2harm, tag:hand, tag:innocuous, tag:messy], 2, NONE, NONE, [playbook:mundane]),
('cricketbat', 'weapon', 'Cricket bat', [tag:2harm, tag:hand, tag:innocuous, tag:messy], 2, NONE, NONE, [playbook:mundane]),
('hockeystick', 'weapon', 'Hockey stick', [tag:2harm, tag:hand, tag:innocuous, tag:messy], 2, NONE, NONE, [playbook:mundane]),
('pocketknife', 'weapon', 'Pocket knife', [tag:1harm, tag:hand, tag:useful, tag:small], 1, NONE, NONE, [playbook:mundane]),
('multitool', 'weapon', 'Multitool', [tag:1harm, tag:hand, tag:useful, tag:small], 1, NONE, NONE, [playbook:mundane]),
('smallhandgun', 'weapon', 'Small handgun', [tag:2harm, tag:close, tag:loud, tag:reload], 2, NONE, NONE, [playbook:mundane]),
('bighuntingrifle', 'weapon', 'Large-caliber hunting rifle', [tag:3harm, tag:far, tag:loud, tag:reload], 3, NONE, NONE, [playbook:mundane]),
('sledgehammer', 'weapon', 'Sledgehammer', [tag:3harm, tag:hand, tag:messy], 3, NONE, NONE, [playbook:mundane]),
('fireaxe', 'weapon', 'Fire axe', [tag:3harm, tag:hand, tag:messy], 3, NONE, NONE, [playbook:mundane]),
('nunchuks', 'weapon', 'Nunchuk', [tag:2harm, tag:hand, tag:area], 2, NONE, NONE, [playbook:mundane]),
('skateboard', 'transport', 'Skateboard', [tag:singlerider], NONE, NONE, NONE, [playbook:mundane]),
('bicycle', 'transport', 'Bicycle', [tag:singlerider], NONE, NONE, NONE, [playbook:mundane]),
('newcar', 'transport', 'Fairly new car', [tag:multiplerider], NONE, NONE, NONE, [playbook:mundane]),
('classiccar', 'transport', 'Classic car', [tag:multiplerider, tag:unreliable], NONE, NONE, NONE, [playbook:mundane, playbook:wronged]),
('motorcycle', 'transport', 'Motorcycle', [tag:dualrider], NONE, NONE, NONE, [playbook:mundane, playbook:wronged]),
('van', 'transport', 'Van', [tag:multiplerider, tag:spacious], NONE, NONE, NONE, [playbook:mundane, playbook:wronged]),
('truck', 'transport', 'Pickup truck', [tag:dualrider, tag:spacious], NONE, NONE, NONE, [playbook:wronged]),
('flakvest', 'armor', 'Flak vest', [tag:1armor, tag:hidden], NONE, NONE, 1, [playbook:professional]),
('combatarmor', 'armor', 'Combat armor', [tag:2armor, tag:heavy], NONE, NONE, 2, [playbook:professional]),
('assaultrifle', 'weapon', 'Assault rifle', [tag:3harm, tag:far, tag:automatic, tag:loud], 3, NONE, NONE, [playbook:professional, playbook:wronged]),
('grenadelauncher', 'weapon', 'Grenade launcher', [tag:4harm, tag:far, tag:area, tag:messy, tag:loud, tag:reload], 4, NONE, NONE, [playbook:professional]),
('bigsniperrifle', 'weapon', 'Large-caliber sniper rifle', [tag:4harm, tag:far], 4, NONE, NONE, [playbook:professional]),
('grenades', 'weapon', 'Grenades', [tag:4harm, tag:close, tag:area, tag:messy, tag:loud, tag:many], 4, NONE, NONE, [playbook:professional]),
('submachinegun', 'weapon', 'Submachine gun', [tag:3harm, tag:close, tag:automatic, tag:loud], 3, NONE, NONE, [playbook:professional]),
('sawnoffshotgun', 'weapon', 'Sawn-off shotgun', [tag:3harm, tag:hand, tag:close, tag:messy, tag:loud, tag:reload], 3, NONE, NONE, [playbook:wronged]),
('handcannon', 'weapon', 'Hand cannon', [tag:3harm, tag:close, tag:loud], 3, NONE, NONE, [playbook:wronged]),
('hugeaxe', 'weapon', 'Huge axe', [tag:3harm, tag:hand, tag:messy, tag:heavy], 3, NONE, NONE, [playbook:wronged]),
('chainsaw', 'weapon', 'Chainsaw', [tag:3harm, tag:hand, tag:messy, tag:unreliable, tag:loud, tag:heavy], 3, NONE, NONE, [playbook:wronged]),
('spookypower', 'weapon', 'Spooky Magic', [tag:2harm, tag:close, tag:volatile, tag:ignorearmor, tag:magic], 2, NONE, NONE, [playbook:spooky]);
