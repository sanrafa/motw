/// HUNTER IMPROVEMENT VALIDATION TABLE
///// Validation table of available improvements

DEFINE TABLE improvement SCHEMAFULL
    PERMISSIONS
        FOR create FULL
        FOR select WHERE owner IS NONE OR owner = $auth.id
        FOR update, delete NONE;

DEFINE FIELD playbook ON TABLE improvement TYPE record(playbook) VALUE NONE OR $after;

DEFINE FIELD name ON TABLE improvement TYPE string VALUE NONE OR $after;

DEFINE FIELD desc ON TABLE improvement TYPE string ASSERT $value IS NOT NONE;

DEFINE FIELD advanced ON TABLE improvement TYPE bool ASSERT $value IS NOT NONE;

DEFINE FIELD metadata ON TABLE improvement TYPE string VALUE NONE OR $after;

DEFINE FIELD owner ON TABLE improvement TYPE record(user) ASSERT $value IS NONE OR $value = $auth.id;

INSERT INTO improvement
(id, playbook, name, desc, advanced, metadata) VALUES
('chosen01', playbook:chosen, NONE, "Get +1 Charm, max +3", false),
('chosen02', playbook:chosen, NONE, "Get +1 Cool, max +3", false),
('chosen03', playbook:chosen, NONE, "Get +1 Sharp, max +3", false),
('chosen04', playbook:chosen, NONE, "Get +1 Tough, max +3", false),
('chosen05', playbook:chosen, NONE, "Get +1 Weird, max +3", false),
('chosen06', playbook:chosen, NONE, "Take another Chosen move", false),
('chosen07', playbook:chosen, NONE, "Take another Chosen move", false),
('chosen08', playbook:chosen, NONE, "Gain an ally", false),
('chosen09', playbook:chosen, NONE, "Take a move from another playbook", false),
('chosen10', playbook:chosen, NONE, "Take a move from another playbook", false),
('chosen11', playbook:chosen, NONE, "Delete one doom tag from your fate, and (optionally) change one heroic tag as well.", true),
('expert01', playbook:expert, NONE, "Get +1 Sharp, max +3", false),
('expert02', playbook:expert, NONE, "Get +1 Charm, max +3", false),
('expert03', playbook:expert, NONE, "Get +1 Cool, max +3", false),
('expert04', playbook:expert, NONE, "Get +1 Weird, max +3", false),
('expert05', playbook:expert, NONE, "Take another Expert move", false),
('expert06', playbook:expert, NONE, "Take another Expert move", false),
('expert07', playbook:expert, NONE, "Add an option to your haven", false),
('expert08', playbook:expert, NONE, "Add an option to your haven", false),
('expert09', playbook:expert, NONE, "Take a move from another playbook", false),
('expert10', playbook:expert, NONE, "Take a move from another playbook", false),
('flake01', playbook:flake, NONE, "Get +1 Sharp, max +3", false),
('flake02', playbook:flake, NONE, "Get +1 Charm, max +3", false),
('flake03', playbook:flake, NONE, "Get +1 Cool, max +3", false),
('flake04', playbook:flake, NONE, "Get +1 Weird, max +3", false),
('flake05', playbook:flake, NONE, "Take another Flake move", false),
('flake06', playbook:flake, NONE, "Take another Flake move", false),
('flake07', playbook:flake, NONE, "Get a haven, like the Expert has, with two options", false),
('flake08', playbook:flake, NONE, "Gain another option for your haven", false),
('flake09', playbook:flake, NONE, "Take a move from another playbook", false),
('flake10', playbook:flake, NONE, "Take a move from another playbook", false),
('initiate01', playbook:initiate, NONE, "Get +1 Weird, max +3", false),
('initiate02', playbook:initiate, NONE, "Get +1 Cool, max +2", false),
('initiate03', playbook:initiate, NONE, "Get +1 Sharp, max +2", false),
('initiate04', playbook:initiate, NONE, "Get +1 Tough, max +2", false),
('initiate05', playbook:initiate, NONE, "Take another Initiate move", false),
('initiate06', playbook:initiate, NONE, "Take another Initiate move", false),
('initiate07', playbook:initiate, NONE, "Get command of your chapter of the Sect", false),
('initiate08', playbook:initiate, NONE, "Get a Sect team under your command", false),
('initiate09', playbook:initiate, NONE, "Take a move from another playbook", false),
('initiate10', playbook:initiate, NONE, "Take a move from another playbook", false),
('initiate11', playbook:initiate, NONE, "Become the leader, or effective leader, of the whole Sect.", true, "This operates similarly to becoming the leader of your chapter. You are now in charge of everything. You don't have superiors any more (except maybe divine ones), but you'll still have to manage the factions within the Sect to get things done."),
('monstrous01', playbook:monstrous, NONE, "Get +1 Charm, max +2", false),
('monstrous02', playbook:monstrous, NONE, "Get +1 Cool, max +2", false),
('monstrous03', playbook:monstrous, NONE, "Get +1 Sharp, max +2", false),
('monstrous04', playbook:monstrous, NONE, "Get +1 Tough, max +2", false),
('monstrous05', playbook:monstrous, NONE, "Take another Monstrous move", false),
('monstrous06', playbook:monstrous, NONE, "Take another Monstrous move", false),
('monstrous07', playbook:monstrous, NONE, "Gain a haven, like the Expert has, with two options", false),
('monstrous08', playbook:monstrous, NONE, "Take a natural attacks pick", false),
('monstrous09', playbook:monstrous, NONE, "Take a move from another playbook", false),
('monstrous10', playbook:monstrous, NONE, "Take a move from another playbook", false),
('monstrous11', playbook:monstrous, NONE, "You have freed yourself from the curse of your kind: your curse no longer applies, but you lose 1 Weird.", true),
('monstrous12', playbook:monstrous, NONE, "You turn evil (again): retire this character, they become one of the Keeper's threats.", true, "Turning evil takes your hunter out of your control permanently. The character is now a threat, for the Keeper to use against the hunters. Given how many of the team's secrets your hunter knows, this option shouldn't be chosen lightly!"),
('mundane01', playbook:mundane, NONE, "Get +1 Charm, max +3", false),
('mundane02', playbook:mundane, NONE, "Get +1 Cool, max +2", false),
('mundane03', playbook:mundane, NONE, "Get +1 Sharp, max +2", false),
('mundane04', playbook:mundane, NONE, "Get +1 Tough, max +2", false),
('mundane05', playbook:mundane, NONE, "Take another Mundane move", false),
('mundane06', playbook:mundane, NONE, "Take another Mundane move", false),
('mundane07', playbook:mundane, NONE, "Get back one used Luck point", false),
('mundane08', playbook:mundane, NONE, "Get back one used Luck point", false),
('mundane09', playbook:mundane, NONE, "Take a move from another playbook", false),
('mundane10', playbook:mundane, NONE, "Take a move from another playbook", false),
('pro01', playbook:professional, NONE, "Get +1 Cool, max +3", false),
('pro02', playbook:professional, NONE, "Get +1 Charm, max +2", false),
('pro03', playbook:professional, NONE, "Get +1 Sharp, max +2", false),
('pro04', playbook:professional, NONE, "Get +1 Tough, max +2", false),
('pro05', playbook:professional, NONE, "Take another Professional move", false),
('pro06', playbook:professional, NONE, "Take another Professional move", false),
('pro07', playbook:professional, NONE, "Add a new resource tag for your Agency or change a red tape tag", false),
('pro08', playbook:professional, NONE, "Get command of an Agency team of monster hunters", false),
('pro09', playbook:professional, NONE, "Take a move from another playbook", false),
('pro10', playbook:professional, NONE, "Take a move from another playbook", false),
('pro11', playbook:professional, NONE, "You can get some or all of the hunters hired by your agency (they'll get the 'deal with the agency' move, as well as salary and benefits).", true, "All the hunters you pick are now Agency employees. They all get the deal with the Agency move, and everything else that goes along with being an agent."),
('spooky01', playbook:spooky, NONE, "Get +1 Weird, max +3", false),
('spooky02', playbook:spooky, NONE, "Get +1 Charm, max +2", false),
('spooky03', playbook:spooky, NONE, "Get +1 Cool, max +2", false),
('spooky04', playbook:spooky, NONE, "Get +1 Sharp, max +2", false),
('spooky05', playbook:spooky, NONE, "Take another Spooky move", false),
('spooky06', playbook:spooky, NONE, "Take another Spooky move", false),
('spooky07', playbook:spooky, NONE, "Change some, or all, of your 'dark side' tags", false),
('spooky08', playbook:spooky, NONE, "Get a mystical library, like the Expert's haven option", false),
('spooky09', playbook:spooky, NONE, "Take a move from another playbook", false),
('spooky10', playbook:spooky, NONE, "Take a move from another playbook", false),
('spooky11', playbook:spooky, NONE, "You discover how to use your powers at a lower price. Delete one 'dark side' tag permanently.", true),
('wronged01', playbook:wronged, NONE, "Get +1 Tough, max +3", false),
('wronged02', playbook:wronged, NONE, "Get +1 Cool, max +2", false),
('wronged03', playbook:wronged, NONE, "Get +1 Sharp, max +2", false),
('wronged04', playbook:wronged, NONE, "Get +1 Weird, max +2", false),
('wronged05', playbook:wronged, NONE, "Take another Wronged move", false),
('wronged06', playbook:wronged, NONE, "Take another Wronged move", false),
('wronged07', playbook:wronged, NONE, "Gain a haven, like the Expert has, with two options", false),
('wronged08', playbook:wronged, NONE, "Add one more option to your haven", false),
('wronged09', playbook:wronged, NONE, "Take a move from another playbook", false),
('wronged10', playbook:wronged, NONE, "Take a move from another playbook", false),
('wronged11', playbook:wronged, NONE, "You track down the specific monster(s) responsible for your loss - the Keeper must make the next mystery about them.", true, "Note that this doesn't mean that you get to automatically win. You just get a shot at them."),
('wronged12', playbook:wronged, NONE, "Change the target of your vengeful rage. 'I know my prey' now applies to these monsters instead.", true),
('adv01', NONE, "+1 To Any Rating", "Just like the normal +1 to a specific rating advance, except you can choose whichever you want. +3 is the maximum for any rating - once you're there, you can't improve any further.", true),
('adv02', NONE, "Change Your Hunter To A New Type", "When you change your type, pick another playbook you wish to change to. Your ratings and history stay the same. You may change your name or look, if you want. For your old moves, check each one and decide (with the Keeper) if it is intrinsic to who you are, or just something you did for a while. If it's intrinsic, keep that move. If not, erase it. Then add new moves from your new playbook, as if you were creating a new hunter. Finally, you may or may not get the new gear, or keep your old gear, depending what makes sense given the circumstances of your change.", true),
('adv03', NONE, "Make A Second Hunter", "Create a new hunter to join the team. You can play both hunters at once, or maybe take turns, deciding which will come along on a mystery on a case-by-case basis. Make up the new hunter as normal, except for history. Only pick history for the hunters played by different people - don't tie your ownhunters together with history picks.", true),
('adv04', NONE, "Retire To Safety", "Your hunter retires to a safe place. They no longer actively hunt monsters, and have found a place to live that's safe from old enemies. Give your hunter to the Keeper to look after from now on. They are safe from the Keeper's threats, and never count as a threat themselves. Your retired hunter might, at your and the Keeper's discretion, count as an ally for the other hunters.", true),
('adv05', NONE, "Erase One Used Luck Mark", "Erase a used Luck mark from your sheet. You have bought some time before Fate comes for you.", true),
('adv06', NONE, "Mark Two Of Your Basic Moves As Advanced", "This means you get better at the basic moves. There's a new result for each advanced move, that applies when you roll a 12 or higher. These 12+ results represent the extraordinary levels of success you can now achieve.", true),
('adv_act', NONE, NONE, 'Advanced Act Under Pressure', true),
('adv_help', NONE, NONE, 'Advanced Help Out', true),
('adv_kickass', NONE, NONE, 'Advanced Kick Some Ass', true),
('adv_protect', NONE, NONE, 'Advanced Protect Someone', true),
('adv_manipulate', NONE, NONE, 'Advanced Manipulate Someone', true),
('adv_investigate', NONE, NONE, 'Advanced Investigate a Mystery', true),
('adv_readsituation', NONE, NONE, 'Advanced Read a Bad Situation', true),
('adv_usemagic', NONE, NONE, 'Advanced Use Magic', true);